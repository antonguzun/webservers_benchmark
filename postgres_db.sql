CREATE TABLE IF NOT EXISTS users (
    user_id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    username text NOT NULL,
    email text,
    metadata jsonb,
    created_at timestamptz NOT NULL,
    updated_at timestamptz NOT NULL,
    is_archived bool DEFAULT FALSE NOT NULL
);  
CREATE UNIQUE INDEX users_pk ON users (user_id) WHERE (is_archived=false);

INSERT INTO users (username, email, created_at, updated_at) 
VALUES ('user1', 'user@gmail.com', NOW(), NOW());
